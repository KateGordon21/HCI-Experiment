<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Human Computer Interaction Project</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            color: #000000;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        #healthAndSafetyPage {
            display: block;
            text-align: center;
            font-size: 18px;
            color: #333;
            margin-top: 50vh;
            transform: translateY(-50%);
        }

        #pressA {
            font-size: 24px;
            color: #007bff; /* Wii's blue color */
            font-weight: bold;
        }

        #homeTitle,
        #homeText,
        #startButton {
            display: none;
        }
    </style>
</head>

<body>

    <div id="healthAndSafetyPage">
        <p>Wii Health and Safety Information</p>
        <p>Read the instructions in the Wii Operations Manual</p>
        <p id="pressA" onclick="toggleElements()">Press A to continue</p>
    </div>

    <!-- Audio Players -->
    <audio id="startSound">
        <source src="../forbidden-texts/sounds/WiiBIOS/WII-START.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>

    <audio id="selectSound">
        <source src="../forbidden-texts/sounds/WiiBIOS/Sample_0018.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>

    <audio id="loopedSound" loop>
        <source src="../forbidden-texts/sounds/WiiMusic/MainMenu.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

    <h1 id="homeTitle">Human Computer Interaction Project</h1>
    <p id="homeText">To begin running the experiment, please press the button below. You will be taken to our informed consent sheet that you must agree to in order to begin testing.</p>

    <button id="startButton" type="button" onclick="playAudioAndRedirect('informed_consent.html')">Start!</button>

    <!-- JavaScript to Toggle Elements and Play Audio -->
    <script>
        var isFirstClick = true;

        function toggleElements() {
            var healthAndSafetyPage = document.getElementById("healthAndSafetyPage");
            var homeTitle = document.getElementById("homeTitle");
            var homeText = document.getElementById("homeText");
            var startButton = document.getElementById("startButton");

            // Toggle visibility of elements
            healthAndSafetyPage.style.display = "none";
            homeTitle.style.display = "block";
            homeText.style.display = "block";
            startButton.style.display = "block";

            // Play audio on toggle
            if (isFirstClick) {
                var startSound = document.getElementById("startSound");
                var playPromise = startSound.play();

                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.error("Autoplay failed:", error);
                    }).then(() => {
                        // Transition completed, play looped sound
                        var loopedSound = document.getElementById("loopedSound");
                        loopedSound.play();
                    });
                }

                isFirstClick = false;
            }
        }

        function playAudioAndRedirect(url) {
            var audio = document.getElementById("selectSound");
            audio.play();
            setTimeout(function () {
                window.location.href = url;
            }, audio.duration * 1000); // Redirect after the duration of the audio
        }
    </script>

</body>

</html>
